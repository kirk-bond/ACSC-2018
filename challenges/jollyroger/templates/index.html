<html>
<head>
  <title>Secure Upload Service</title>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="static/xterm.css">
  <script src="static/xterm.js"></script>
</head>

<body>
  <div class="container">

    <h1>Upload a firmware file</h1>
    <form method=post enctype=multipart/form-data>
      <div class="form-group">
        <label for="file">File:</label>
        <input type=file class=form-control-file" id="file", name=file>
      </div>
      <button type=submit class="btn btn-success">Upload</button>
    </form>

    <br>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          {% if category == "error" %}
            <div class="alert alert-danger">
          {% elif category == "warning" %}
            <div class="alert alert-warning">
          {% elif category == "success" %}
            <div class="alert alert-success">
          {% else %}
            <div class="alert alert-info">
          {% endif %}
            {{ message }}
            </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

  </div>

  <div class="container-fluid">
    <div id="terminal" style="max-width: 780px; margin-left: auto; margin-right: auto; border:10px solid black"></div>
    <script>
      var term = new Terminal();
      term.open(document.getElementById("terminal"));

      // test output scrolling and display (24x80 terminal)
      term.write("Hello from \x1B[1;3;31mxterm.js\x1B[0m $ ");
      term.write("a".repeat(175));
      term.writeln("");
      for (i = 0; i < 35; i++) {
        term.writeln(i + ": test output");
      }
    </script>
  </div>

</body>

</html>
